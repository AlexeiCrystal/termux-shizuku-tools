#!/data/data/com.termux/files/usr/bin/sh

TERMPACKAGE="com.termux"

echo "Creating rish script..."

printf '#!/system/bin/sh\nBASEDIR=$(dirname "$0")\nDEX="$BASEDIR"/rish_shizuku.dex\n\nif [ ! -f "$DEX" ]; then\n  echo "Cannot find $DEX, please check the tutorial in Shizuku app"\n  exit 1\nfi\n\nif [ $(getprop ro.build.version.sdk) -ge 34 ]; then\n  if [ -w $DEX ]; then\n    echo "On Android 14+, app_process cannot load writable dex."\n    echo "Attempting to remove the write permission..."\n    chmod 400 $DEX\n  fi\n  if [ -w $DEX ]; then\n    echo "Cannot remove the write permission of $DEX."\n    echo "You can copy to file to terminal app'\''s private directory (/data/data/<package>, so that remove write permission is possible"\n    exit 1\n  fi\nfi\n\n# Replace "PKG" with the application id of your terminal app\n[ -z "$RISH_APPLICATION_ID" ] && export RISH_APPLICATION_ID="'"$TERMPACKAGE"'"\n/system/bin/app_process -Djava.class.path="$DEX" /system/bin --nice-name=rish rikka.shizuku.shell.ShizukuShellLoader "$@"' > $HOME/rish

echo "Creating dex file..."

printf "ZGV4CjAzNQAa/1bOcipPWeWPWgcXCpDLf/u2aEF1pm6sGgAAcAAAAHhWNBIAAAAAAAAAAOgZAACO\nAAAAcAAAADAAAACoAgAAJQAAAGgDAAALAAAAJAUAAD4AAAB8BQAABAAAAGwHAADAEgAA7AcAAKAO\nAACoDgAAqw4AAM4OAADYDgAA4A4AAOMOAAAVDwAAJg8AACkPAAA5DwAARw8AAEoPAABNDwAAUQ8A\nAFUPAABZDwAAXg8AAGUPAABsDwAAkQ8AALYPAADWDwAA+A8AABQQAAA3EAAAURAAAGYQAACCEAAA\nlhAAAKsQAADBEAAA1xAAAOwQAAABEQAAHhEAAD8RAABUEQAAbhEAAJIRAACyEQAA0hEAAOIRAAD5\nEQAAExIAACYSAAA/EgAAYxIAAHcSAACNEgAAoRIAALwSAADQEgAA5xIAAAMTAAAYEwAARBMAAG4T\nAAClEwAAqhMAAL8TAAAuFAAASxQAABkVAAAiFQAAMhUAAEkVAABVFQAAWBUAAFwVAABgFQAAZRUA\nAGoVAABxFQAAdBUAAHsVAAB/FQAAhBUAAIkVAACdFQAAshUAAMcVAADKFQAA1xUAAOEVAADrFQAA\n8xUAAAAWAAADFgAACxYAABwWAABkFgAAZxYAAHMWAAB9FgAAhBYAAJcWAACmFgAAqRYAAK8WAAC3\nFgAAvBYAAMQWAADKFgAA0RYAANkWAADsFgAA+xYAAAcXAAAUFwAAIBcAADYXAAA+FwAARhcAAE4X\nAABbFwAAZBcAAHcXAACCFwAAiBcAAI4XAACWFwAAtxcAANMXAADZFwAA5RcAAPgXAAD+FwAACxgA\nAB4YAAAvGAAAOBgAAEMYAABNGAAAWRgAAGsYAACXGAAAnBgAAKgYAAC9GAAAxxgAAM4YAAAFAAAA\nCAAAAAsAAAARAAAAEgAAABMAAAAUAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAGwAAABwAAAAd\nAAAAHgAAAB8AAAAgAAAAIQAAACIAAAAjAAAAJAAAACUAAAAmAAAAJwAAACgAAAApAAAAKgAAACsA\nAAAsAAAALQAAAC4AAAAvAAAAMAAAADEAAAAyAAAAMwAAADQAAAA1AAAANgAAADcAAAA4AAAAQwAA\nAEkAAABOAAAATwAAAFAAAAAIAAAAAQAAAAAAAAAJAAAAAQAAALQNAAAKAAAAAQAAANQNAAAPAAAA\nBwAAAPANAAAOAAAACwAAAPgNAAAQAAAACwAAAAAOAAAPAAAACwAAAAgOAAAQAAAACwAAABAOAAAM\nAAAAEQAAAAAAAAAPAAAAEQAAAAgOAAAMAAAAEgAAAAAAAAAPAAAAHgAAAAgOAAAMAAAAHwAAAAAA\nAAAQAAAAIQAAABgOAAAMAAAAIwAAAAAAAAAPAAAAIwAAAAgOAAAQAAAAIwAAACAOAAANAAAAJAAA\nACgOAAAPAAAAJAAAAAgOAAAQAAAAJwAAADAOAABDAAAAKwAAAAAAAABEAAAAKwAAAPgNAABHAAAA\nKwAAADgOAABFAAAAKwAAAEAOAABFAAAAKwAAAEgOAABFAAAAKwAAAAgOAABGAAAAKwAAAFAOAABH\nAAAAKwAAAFgOAABIAAAAKwAAAGAOAABFAAAAKwAAAGwOAABJAAAALAAAAAAAAABKAAAALAAAAHQO\nAABLAAAALAAAAIAOAABLAAAALAAAAIgOAABNAAAALAAAAJAOAABLAAAALAAAAKwNAABMAAAALAAA\nAJgOAAADACMAUQAAAAQAEQBRAAAABAAjAFcAAAANAAEAPwAAAA4ALwBAAAAAGwAAAH0AAAAlABwA\nZAAAACoALwBRAAAAKgAjAFcAAAAqABAAWwAAACoAKQBhAAAAAwAZAAQAAAADABQAiAAAAAQAFgAE\nAAAABAAUAIgAAAAFAAMAVgAAAAYAAwBWAAAABwABAFkAAAAHAAIAigAAAAsAGQAEAAAACwAEAFQA\nAAALAAUAYAAAAAsABwCEAAAACwAGAIkAAAAMABQABAAAAAwAHwB8AAAADwAUAAQAAAAPABsAgwAA\nABAAFwAEAAAAEAAjAH4AAAAQACQAfwAAABIACgBqAAAAEgAUAHYAAAASABQAgAAAABMADgCFAAAA\nEwAIAIYAAAAUAAkAbQAAABUADgBrAAAAFgAaAF4AAAAWAAAAcAAAABcAIABzAAAAGgAcAAQAAAAb\nABkABAAAABsAHgBcAAAAGwAeAF0AAAAbAB4AZQAAABsAHgByAAAAGwAeAHgAAAAcABQAZwAAABwA\nGQCCAAAAHgATAGkAAAAfAAwAbgAAAB8ACwB1AAAAIQAUAAQAAAAjACEAYwAAACMAEABoAAAAJAAU\nAAQAAAAkABEAVQAAACQAEgBVAAAAJAAOAIsAAAAlABUAZgAAACUADwBsAAAAJQAPAG8AAAAmAA4A\n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\nAQAAABIAAAABAAAAHAAAAAIAAAAjAAEAAgAAACMAEQAEAAAAIwAjACMAHwABAAAALwAAAAQAAAAB\nABMAEwABAAEAAAAdAAAAAQAAACEAAAACAAAAIQAhAAIAAAAiAAIABiEvbGliLwABLgAhL2RhdGEv\nbG9jYWwvdG1wL3Jpc2gtc2hpenVrdS0xMDQ5AAg8Y2xpbml0PgAGPGluaXQ+AAFDADBDYWxsaW5n\nIGFwcGxpY2F0aW9uIGRpZCBub3QgcHJvdmlkZSBwYWNrYWdlIG5hbWUAD0NsYXNzIG5vdCBmb3Vu\nZAABSQAOSUxMTExJTExMSUxaWkkADElMTExMTExJSUxMSQABSgABTAACTEMAAkxJAAJMTAADTExM\nAAVMYS9hOwAFTGEvYjsAI0xhbmRyb2lkL2FwcC9BY3Rpdml0eU1hbmFnZXJOYXRpdmU7ACNMYW5k\ncm9pZC9hcHAvSUFjdGl2aXR5TWFuYWdlciRTdHViOwAeTGFuZHJvaWQvYXBwL0lBY3Rpdml0eU1h\nbmFnZXI7ACBMYW5kcm9pZC9hcHAvSUFwcGxpY2F0aW9uVGhyZWFkOwAaTGFuZHJvaWQvYXBwL1By\nb2ZpbGVySW5mbzsAIUxhbmRyb2lkL2NvbnRlbnQvSUludGVudFJlY2VpdmVyOwAYTGFuZHJvaWQv\nY29udGVudC9JbnRlbnQ7ABNMYW5kcm9pZC9vcy9CaW5kZXI7ABpMYW5kcm9pZC9vcy9CdWlsZCRW\nRVJTSU9OOwASTGFuZHJvaWQvb3MvQnVpbGQ7ABNMYW5kcm9pZC9vcy9CdW5kbGU7ABRMYW5kcm9p\nZC9vcy9IYW5kbGVyOwAUTGFuZHJvaWQvb3MvSUJpbmRlcjsAE0xhbmRyb2lkL29zL0xvb3BlcjsA\nE0xhbmRyb2lkL29zL1BhcmNlbDsAG0xhbmRyb2lkL29zL1NlcnZpY2VNYW5hZ2VyOwAfTGFuZHJv\naWQvc3lzdGVtL0Vycm5vRXhjZXB0aW9uOwATTGFuZHJvaWQvc3lzdGVtL09zOwAYTGFuZHJvaWQv\ndGV4dC9UZXh0VXRpbHM7ACJMZGFsdmlrL2Fubm90YXRpb24vRW5jbG9zaW5nQ2xhc3M7AB5MZGFs\ndmlrL2Fubm90YXRpb24vSW5uZXJDbGFzczsAHkxkYWx2aWsvc3lzdGVtL0RleENsYXNzTG9hZGVy\nOwAOTGphdmEvaW8vRmlsZTsAFUxqYXZhL2lvL1ByaW50U3RyZWFtOwAYTGphdmEvbGFuZy9DaGFy\nU2VxdWVuY2U7ABFMamF2YS9sYW5nL0NsYXNzOwAXTGphdmEvbGFuZy9DbGFzc0xvYWRlcjsAIkxq\nYXZhL2xhbmcvQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbjsAEkxqYXZhL2xhbmcvT2JqZWN0OwAUTGph\ndmEvbGFuZy9SdW5uYWJsZTsAEkxqYXZhL2xhbmcvU3RyaW5nOwAZTGphdmEvbGFuZy9TdHJpbmdC\ndWlsZGVyOwASTGphdmEvbGFuZy9TeXN0ZW07ABVMamF2YS9sYW5nL1Rocm93YWJsZTsAGkxqYXZh\nL2xhbmcvcmVmbGVjdC9NZXRob2Q7ABNMamF2YS91dGlsL09iamVjdHM7ACpMcmlra2Evc2hpenVr\ndS9zaGVsbC9TaGl6dWt1U2hlbGxMb2FkZXIkYTsAKExyaWtrYS9zaGl6dWt1L3NoZWxsL1NoaXp1\na3VTaGVsbExvYWRlcjsANU1ha2Ugc3VyZSB5b3UgaGF2ZSBTaGl6dWt1IHYxMi4wLjAgb3IgYWJv\ndmUgaW5zdGFsbGVkAANQS0cAE1JJU0hfQVBQTElDQVRJT05fSUQAbVJJU0hfQVBQTElDQVRJT05f\nSUQgaXMgbm90IHNldCwgc2V0IHRoaXMgZW52aXJvbm1lbnQgdmFyaWFibGUgdG8gdGhlIGlkIG9m\nIGN1cnJlbnQgYXBwbGljYXRpb24gKHBhY2thZ2UgbmFtZSkAG1JlcXVlc3QgYmluZGVyIGZyb20g\nU2hpenVrdQDLAVJlcXVlc3QgdGltZW91dC4gVGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY3Vy\ncmVudCBhcHAgKCUxJHMpIGFuZCBTaGl6dWt1IGFwcCBtYXkgYmUgYmxvY2tlZCBieSB5b3VyIHN5\nc3RlbS4gUGxlYXNlIGRpc2FibGUgYWxsIGJhdHRlcnkgb3B0aW1pemF0aW9uIGZlYXR1cmVzIGZv\nciBib3RoIGN1cnJlbnQgYXBwICglMSRzKSBhbmQgU2hpenVrdSBhcHAuAAdTREtfSU5UAA5TVVBQ\nT1JURURfQUJJUwAVU2VydmVyIGlzIG5vdCBydW5uaW5nAApTb3VyY2VGaWxlAAFWAAJWSQACVkwA\nA1ZMSQADVkxMAAVWTExMTAABWgAFWklMTEkAAlpMAANaTEoAA1pMTAASW0xqYXZhL2xhbmcvQ2xh\nc3M7ABNbTGphdmEvbGFuZy9PYmplY3Q7ABNbTGphdmEvbGFuZy9TdHJpbmc7AAFhAAthY2Nlc3NG\nbGFncwAIYWN0aXZpdHkACGFkZEZsYWdzAAZhcHBlbmQAC2FzSW50ZXJmYWNlAAFiAAZiaW5kZXIA\nD2Jyb2FkY2FzdEludGVudABGYnJvYWRjYXN0SW50ZW50IGZhaWxzIG9uIEFuZHJvaWQgOC4wIG9y\nIDguMSwgZmFsbGJhY2sgdG8gc3RhcnRBY3Rpdml0eQABYwAKY2FuRXhlY3V0ZQAIY2FuV3JpdGUA\nBWNobW9kABFjb20uYW5kcm9pZC5zaGVsbAANY3JlYXRlQ2hvb3NlcgABZAAEZGF0YQAGZXF1YWxz\nAANlcnIABmV4aXN0cwAEZXhpdAAFZmx1c2gABmZvcm1hdAARZ2V0RGVjbGFyZWRNZXRob2QADWdl\ndE1haW5Mb29wZXIACmdldE1lc3NhZ2UAC2dldFByb3BlcnR5AApnZXRTZXJ2aWNlABRnZXRTeXN0\nZW1DbGFzc0xvYWRlcgAGZ2V0ZW52AAZnZXR1aWQABmludm9rZQALaXNEaXJlY3RvcnkAB2lzRW1w\ndHkAEWphdmEubGlicmFyeS5wYXRoAAlsb2FkQ2xhc3MABGxvb3AABG1haW4ABm1rZGlycwAfbW9l\nLnNoaXp1a3UubWFuYWdlci5zaGVsbC5TaGVsbAAabW9lLnNoaXp1a3UucHJpdmlsZWdlZC5hcGkA\nBG5hbWUACm9uVHJhbnNhY3QAEXBhdGhTZXBhcmF0b3JDaGFyAARwb3N0AAtwb3N0RGVsYXllZAAR\ncHJlcGFyZU1haW5Mb29wZXIAD3ByaW50U3RhY2tUcmFjZQAHcHJpbnRsbgAJcHV0QmluZGVyAAhw\ndXRFeHRyYQAKcmVhZFN0cmluZwAQcmVhZFN0cm9uZ0JpbmRlcgAqcmlra2Euc2hpenVrdS5pbnRl\nbnQuYWN0aW9uLlJFUVVFU1RfQklOREVSAANydW4ACnNldFBhY2thZ2UAE3N0YXJ0QWN0aXZpdHlB\nc1VzZXIACHRvU3RyaW5nAAV2YWx1ZQCYAX5+Ujh7ImJhY2tlbmQiOiJkZXgiLCJjb21waWxhdGlv\nbi1tb2RlIjoicmVsZWFzZSIsImhhcy1jaGVja3N1bXMiOmZhbHNlLCJtaW4tYXBpIjoyMywicGct\nbWFwLWlkIjoiNGFhZDI2ZCIsInI4LW1vZGUiOiJjb21wYXRpYmlsaXR5IiwidmVyc2lvbiI6Ijgu\nMC40NiJ9AAIYAYwBGCoCGQJSBAF7HgABAQEAkSAAgaAE7A8BEYgQAAIBAQGRIAGRIAKBoATUEAMR\n9BAAAAEBOIGABLgVORHMFAQABAAHCQEJAQkBGTqJgATQFQGBgATwFQEJhBgBCYgWAAIAAABpGQAA\ncBkAAMwZAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAEAAAAAAAAAAQAAAI4AAABwAAAAAgAAADAAAACo\nAgAAAwAAACUAAABoAwAABAAAAAsAAAAkBQAABQAAAD4AAAB8BQAABgAAAAQAAABsBwAAASAAAAoA\nAADsBwAAAyAAAAMAAACXDQAAARAAABgAAACsDQAAAiAAAI4AAACgDgAABCAAAAIAAABpGQAAACAA\nAAQAAAB4GQAAAxAAAAEAAADMGQAABiAAAAEAAADYGQAAABAAAAEAAADoGQAA" | base64 -d > $HOME/rish_shizuku.dex

echo "Configured successfully!"

echo
echo "Tips:"
echo '1. To run Shizuku mode write command "shizuku"'
echo '2. To exit from Shizuku mode write command "exit"'
